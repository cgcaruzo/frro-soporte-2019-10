{% extends "base.html" %}
{% block title %}Vehículos{% endblock %}
{% block content %}
	<h2>Vehículos
	<a class="btn btn-primary text-right" href="/vehiculo/nuevo">Nuevo Vehículo</a>
	</h2>
	
	{% if msg %}
		<div class="alert alert-success alert-dismissible">
			<button type="button" class="close" data-dismiss="alert">&times;</button>
			{{ msg }}
		</div>
	{% endif %}
	<div class="card">
		<div class="card-body">
			<form action='/vehiculo' name="formu" method="post" onsubmit="return confirmar();">
				<table class="table table-sm table-striped table-hover">
					<thead>
						<th></th>
						<th></th>
						<th>ID</th>
						<th>Vehículo</th>
						<th>Patente</th>
						<th>Capacidad</th>
					</thead>
					<tbody>
						{% for vehiculo in vehiculos %}
							<tr>
								<td>
									<input type="checkbox" value="{{ vehiculo.id }}" name="borrar" onclick="document.getElementById('boton').style.display='block'">
								</td>
								<td>
									<a class="btn btn-sm btn-link" href="/vehiculo/{{ vehiculo.id }}/editar">Editar</a>
								</td>
								<td>{{ vehiculo.id }}</td>
								<td>{{ vehiculo.nombre }}</td>
								<td>{{ vehiculo.patente }}</td>
								<td>{{ vehiculo.capacidad }}</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
				<input type="submit" value="Borrar" class="btn btn-danger" id="boton" style="display:none">
			</form>
		</div>
	</div>

	<script>
		function confirmar() {
        	var checkcount = 0;
            var cajas = document.formu.elements["borrar"];
            var i;
            for (i=0; i < cajas.length; i++) {
                if(cajas[i].checked == true) {
                    checkcount++;
                    }
                }
            if (checkcount === 0) {
                alert("Ningún elemento seleccionado.");
                return false;
                }
            else {
                return confirm("¿Seguro que deseas eliminar los pedidos seleccionados?");
                }
        }
	</script>
{% endblock %}
